### Global Variables
@baseUrl = http://localhost:3000
@password = password123


### =========================================================================
### 1. SYSTEM & PUBLIC ROUTES
### =========================================================================

# @name HealthCheck
GET {{baseUrl}}/health

### -------------------------------------------------------------------------

# @name GetInitialFeed
GET {{baseUrl}}/api/feed?limit=5

### -------------------------------------------------------------------------

# @name GetNextBatch
@nextCursor = {{GetInitialFeed.response.body.pagination.nextCursor}}
GET {{baseUrl}}/api/feed?cursor={{nextCursor}}&limit=5

---

### =========================================================================
### 2. AUTHENTICATION
### =========================================================================

# @name Signup
POST {{baseUrl}}/auth/signup
Content-Type: application/json

{
    "name": "Jughead Jones",
    "email": "jughead@riverdale.com",
    "password": "Password123!"
}

### -------------------------------------------------------------------------

# @name Login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "jughead@riverdale.com",
  "password": "Password123!"
}

### Capture Auth Token
@authToken = {{Login.response.body.accessToken}}

---

### =========================================================================
### 3. SEARCH (HYBRID ENGINE)
### =========================================================================

# @name HybridSearch (Orchestrated Node + Python)
GET {{baseUrl}}/api/search?q=web&limit=5&mode=hybrid
Authorization: Bearer {{authToken}}

### -------------------------------------------------------------------------

# @name LexicalSearch (MongoDB Only - Fast Path)
GET {{baseUrl}}/api/search?q=web&limit=5&mode=lexical
Authorization: Bearer {{authToken}}

---

### =========================================================================
### 4. PROFILE & ORCHESTRATION (The BFF Path)
### =========================================================================

# @name FullProfileOrchestrator (Replaces fragmented calls)
# Returns: Profile, Stats, Drafts, and Favorites in ONE call
GET {{baseUrl}}/profile/me/full-profile
Authorization: Bearer {{authToken}}

---

### =========================================================================
### 5. POST LIFECYCLE (CRUD + COLLABORATION)
### =========================================================================

# @name CreatePost
POST {{baseUrl}}/posts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "Burger Philosophy 101",
  "description": "The hat is non-negotiable.",
  "isPublic": true,
  "hashtags": ["riverdale", "burgers"]
}

@postUuid = {{CreatePost.response.body.uuid}}

### -------------------------------------------------------------------------

# @name CreateWithCoEditors
POST {{baseUrl}}/posts
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "Collaborative Burger Research",
  "description": "Investigating the Pop's menu.",
  "isPublic": true,
  "editorUuids": ["b848f9cc-720e-4e7f-b43d-d25d1ddb4f93"]
}

### -------------------------------------------------------------------------

# @name UpdatePost
PUT {{baseUrl}}/posts/{{postUuid}}
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "title": "Burger Philosophy 102",
  "isPublic": false
}

### -------------------------------------------------------------------------

# @name FavoritePost
POST {{baseUrl}}/posts/{{postUuid}}/favorite
Authorization: Bearer {{authToken}}

### -------------------------------------------------------------------------

# @name DeletePost
DELETE {{baseUrl}}/posts/{{postUuid}}
Authorization: Bearer {{authToken}}

---

### =========================================================================
### 6. ANALYTICS & MAINTENANCE
### =========================================================================

# @name RecordView
POST {{baseUrl}}/analytics/event
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "postId": "{{postUuid}}",
    "type": "view"
}

### -------------------------------------------------------------------------

# @name Logout
GET {{baseUrl}}/profile/logout
Authorization: Bearer {{authToken}}