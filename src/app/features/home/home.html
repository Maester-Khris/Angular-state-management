<div>
  <section class="hero-section position-relative overflow-hidden py-5 d-flex flex-column justify-content-center">
    <div class="container position-relative z-1 ">
      <div class="row align-items-center ">
        <div class="col-lg-6 mb-5 mb-lg-0">
          <div
            class="d-inline-flex align-items-center mb-4 py-2 px-3 rounded-pill glass-badge border border-primary-subtle shadow-sm">
            <span class="pulsing-dot me-2"></span>
            <span class="text-primary fw-bold small text-uppercase tracking-widest">
              Share ideas. Build presence.
            </span>
          </div>

          <h1 class="hero-title fw-black lh-1 mb-4">
            Where thoughtful posts<br>
            <span class="text-gradient-animated">become influence</span>
          </h1>

          <p class="hero-lead mb-5">
            Join the elite circle of <span class="text-dark fw-semibold">engineers, creators, and builders</span>.
            Publish high-fidelity content and curate the future of technical influence.
          </p>

          <div class="d-flex flex-column flex-sm-row gap-4 align-items-sm-center">
            <button class="btn btn-primary-elevated btn-lg px-5 py-3">
              Start Writing <i class="bi bi-arrow-right ms-2"></i>
            </button>
            <a href="#" class="link-secondary fw-semibold text-decoration-none hover-underline">
              Explore Community Posts
            </a>
          </div>

          <div class="mt-5 pt-4 border-top border-light d-flex align-items-center gap-3">
            <div class="avatar-stack">
              <img src="https://i.pravatar.cc/40?u=1" alt="user" class="rounded-circle border border-2 border-white">
              <img src="https://i.pravatar.cc/40?u=2" alt="user"
                class="rounded-circle border border-2 border-white ms-n2">
              <img src="https://i.pravatar.cc/40?u=3" alt="user"
                class="rounded-circle border border-2 border-white ms-n2">
            </div>
            <span class="text-muted small fw-medium">Join <span class="text-dark fw-bold">1.2k+</span> authors shaping
              the web.</span>
          </div>
        </div>
        <div class="col-lg-6 position-relative">
          <div class="hero-visual mx-auto">
            <div class="floating-card card shadow-lg">
              <div class="card-body">
                <span class="badge bg-secondary-subtle text-secondary mb-2">Engineering</span>
                <h6 class="fw-bold mb-1">Getting Started with Angular</h6>
                <p class="small text-muted mb-0">A clean architecture-first approach.</p>
              </div>
            </div>
            <div class="floating-card card shadow-lg delay-1">
              <div class="card-body">
                <span class="badge bg-success-subtle text-success mb-2">Design</span>
                <h6 class="fw-bold mb-1">Designing for Scale</h6>
                <p class="small text-muted mb-0">Why constraints create clarity.</p>
              </div>
            </div>
            <div class="floating-card card shadow-lg delay-2">
              <div class="card-body">
                <span class="badge bg-warning-subtle text-warning mb-2">Product</span>
                <h6 class="fw-bold mb-1">From MVP to Platform</h6>
                <p class="small text-muted mb-0">Lessons from real startups.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="gradient-blob blob-1"></div>
    <div class="gradient-blob blob-2"></div>
  </section>

  <div class="home-container" *ngIf="vm$ | async as vm" style="margin-top: 40px!important;">
    <header class="home-header mb-5">
      <app-search-bar (search)="onSearch($event)"></app-search-bar>
    </header>

    <div class="bento-grid">
      @for (post of vm.posts; track post.title; let i = $index) {
      <div class="bento-item" (click)="openDetails(post.title)">
        <app-post-card [post]="post" mode="card">
          <div actions>
            <button class="btn-fav ms-auto">
              <i class="bi bi-bookmark-plus"></i>
            </button>
          </div>
        </app-post-card>
      </div>
      }
      @if (vm.loading) {
      @for (i of [1, 2, 3]; track i) {
      <div class="bento-item">
        <app-skeleton-card></app-skeleton-card>
      </div>
      }
      }
    </div>

    <div class="status-footer py-5 text-center">
      @if (vm.loading) {
      <app-loading-spinner size="sm" label="Fetching more insights..."></app-loading-spinner>
      }

      @if(vm.hasMore) {
      <div appInfiniteScroll (scrolled)="loadMore(vm.loading)" class="scroll-anchor"></div>
      } @else if (vm.posts.length > 0) {
      <div class="no-more-indicator">
        <hr class="w-25 mx-auto opacity-10">
        <p class="text-muted small fw-medium">No more posts at this time.</p>
      </div>
      }
    </div>

    <div class="immersive-overlay" [class.active]="isDrawerOpen()" (click)="closeDetails()">
      <div class="detail-container" (click)="$event.stopPropagation()">
        <router-outlet></router-outlet>
      </div>
    </div>

    <div class="backdrop" *ngIf="isDrawerOpen()" (click)="closeDetails()"></div>
  </div>
</div>