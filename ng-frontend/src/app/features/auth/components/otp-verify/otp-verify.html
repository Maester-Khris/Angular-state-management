<div class="otp-container text-center">
  <div class="mb-4">
    <i class="bi bi-shield-lock text-primary display-4"></i>
  </div>

  <p class="text-muted mb-4">
    Enter the 6-digit code sent to <br>
    <span class="text-dark fw-bold">{{ email }}</span>
  </p>

  <form (submit)="submitOtp()">
    <div class="d-flex justify-content-center gap-2 mb-4" id="otp-inputs">
      @for (slot of [0,1,2,3,4,5]; track $index) {
        <input 
          #otpSlot
          type="text" 
          maxlength="1" 
          class="form-control otp-field shadow-none"
          (keyup)="onKeyUp($event, $index)"
          (paste)="onPaste($event)"
          pattern="\d*"
          inputmode="numeric">
      }
    </div>

    <button type="submit" 
            class="btn btn-primary w-100 py-2 fw-semibold mb-3"
            [disabled]="isSubmitting || !isOtpComplete()">
      @if (isSubmitting) {
        <span class="spinner-border spinner-border-sm me-2"></span> Verifying...
      } @else {
        Verify Account
      }
    </button>
  </form>

  <div class="otp-footer">
    @if (resendTimer > 0) {
      <p class="text-muted small">Resend code in <span class="fw-bold">{{ resendTimer }}s</span></p>
    } @else {
      <button (click)="resendCode()" class="btn btn-link text-primary fw-bold text-decoration-none small">
        Resend Code
      </button>
    }
    
    <div class="mt-3">
      <button (click)="onBack.emit()" class="btn btn-link text-muted text-decoration-none btn-sm">
        <i class="bi bi-arrow-left me-1"></i> Use a different email
      </button>
    </div>
  </div>
</div>